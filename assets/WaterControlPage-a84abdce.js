import{r as i,M as ye,j as e,b as R,g as I,k as ke,m as We,n as X,i as Se,A as xe,o as De,u as T,p as ge,q as Me,t as je,v as Pe,w as $e,f as be,x as Le,y as Ne,z as Ie,B as Re,C as Fe,D as He,E as Ve,F as Ee,G as Ue,H as qe,N as he,I as Y,O as Oe,J as ze,K as Ge,P as Je}from"./index-f1ab3deb.js";import{p as Q}from"./parseDate-629c4fe8.js";import{L as Ye}from"./Logo-2ae728eb.js";import{$ as Xe,c as fe,a as ve,d as se,u as Te,o as Be,s as _,C as E,L as Qe}from"./Loader-32ce212e.js";const Z=()=>i.useContext(ye),U=({width:s,height:a})=>e.jsx(Xe,{visible:!0,height:a,width:s,ariaLabel:"color-ring-loading",wrapperStyle:{},wrapperClass:"color-ring-wrapper",colors:["#9be1a0","#f0eff4","#ffffffea","#87d28d","#323f47"]}),Ze="_WaterForm_1jleh_1",Ke="_FormHeader_1jleh_13",es="_AmountOfWater_1jleh_25",ss="_TapAddWaterWrapper_1jleh_36",ts="_TapAddWater_1jleh_36",as="_TapAddWaterValue_1jleh_88",ns="_RecordingTimeLabel_1jleh_104",os="_RecordingTime_1jleh_104",rs="_WaterValueLabel_1jleh_136",cs="_WaterValue_1jleh_136",ls="_SaveBtn_1jleh_177",j={WaterForm:Ze,FormHeader:Ke,AmountOfWater:es,TapAddWaterWrapper:ss,TapAddWater:ts,TapAddWaterValue:as,RecordingTimeLabel:ns,RecordingTime:os,WaterValueLabel:rs,WaterValue:cs,SaveBtn:ls,Error:"_Error_1jleh_213"},is=({operationType:s="add",editTime:a,waterPortion:t,waterID:o,handleClose:l})=>{const[r,x]=i.useState(t),m=R(),[A,h]=i.useState(!1),f=new Date(a),p=f.getFullYear(),d=String(f.getMonth()+1).padStart(2,"0"),u=String(f.getDate()).padStart(2,"0"),v=s==="add"?new Date:f,B=String(v.getHours()).padStart(2,"0"),y=String(v.getMinutes()).padStart(2,"0"),[M,te]=i.useState(B),[F,q]=i.useState(y),O=fe().shape({recordingTime:ve().required("recordTimeRequired").matches(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/,"invalidTimeFormat"),waterValue:se().required("waterValueRequired").min(50,"waterValueGreater").max(5e3,"waterValueLess")}),{control:c,handleSubmit:w,setValue:g,formState:{errors:L}}=Te({resolver:Be(O),defaultValues:{recordingTime:`${M}:${F}`,waterValue:r.toString()}}),ae=C=>{const K=new Date(`${p}-${d}-${u}T${M}:${F}:00`).getTime().toString(),re={amount:C.waterValue,date:K},Ae={amount:C.waterValue,date:K};switch(h(!0),s){case"add":m(We(re)).then(({error:ce})=>{ce?h(!1):(h(!1),l())});break;case"edit":m(ke({id:o,formData:Ae})).then(({error:ce})=>{ce?h(!1):(h(!1),l())});break;default:h(!1);break}},ne=C=>{switch(C){case"add":return e.jsx("p",{className:j.FormHeader,children:"Оберіть значення:"});case"edit":return e.jsx("p",{className:j.FormHeader,children:"Виправити дані:"});default:return e.jsx("p",{className:j.FormHeader,children:"Оберіть значення:"})}},k=C=>{x(C),g("waterValue",C.toString())},D=r===50,oe=r===5e3;return e.jsxs("form",{className:j.WaterForm,onSubmit:w(ae),children:[ne(s),e.jsx("p",{className:j.AmountOfWater,children:"Кількість води:"}),e.jsxs("div",{className:j.TapAddWaterWrapper,children:[e.jsx("button",{type:"button",className:j.TapAddWater,onClick:()=>k(Math.max(r-50,0)),disabled:D,children:e.jsx("svg",{children:e.jsx("use",{xlinkHref:_+"#icon-minus"})})}),e.jsxs("p",{className:j.TapAddWaterValue,children:[r," ","ml"]}),e.jsx("button",{type:"button",className:j.TapAddWater,onClick:()=>k(r+50),disabled:oe,children:e.jsx("svg",{children:e.jsx("use",{xlinkHref:_+"#icon-plus"})})})]}),e.jsxs("label",{className:j.RecordingTimeLabel,children:["Час запису:",e.jsx(E,{name:"recordingTime",control:c,render:({field:C})=>e.jsx("input",{...C,type:"text",className:I(j.RecordingTime),placeholder:"HH:MM",onChange:z=>{const[K,re]=z.target.value.split(":");te(K),q(re),C.onChange(z)}})}),L.recordingTime&&e.jsx("p",{className:j.Error,children:L.recordingTime.message})]}),e.jsxs("label",{className:j.WaterValueLabel,children:["Введіть обєм води:",e.jsx(E,{name:"waterValue",control:c,render:({field:C})=>e.jsx("input",{...C,type:"number",value:r||"",onChange:z=>k(Number(z.target.value)),className:j.WaterValue})}),L.waterValue&&e.jsx("p",{className:j.Error,children:L.waterValue.message})]}),e.jsx("button",{type:"submit",className:j.SaveBtn,disabled:A,children:A?e.jsx(U,{height:44,width:44}):"Зберегти"})]})},ds={DURATION:15},ms="_WaterModal_198kh_1",us="_WaterModalCloseBtn_198kh_22",pe={WaterModal:ms,WaterModalCloseBtn:us},_e=({operationType:s,onClose:a,water:t={},timestampFromUrl:o=""})=>{const l=()=>{const p=setTimeout(()=>{a(),clearTimeout(p)},ds.DURATION)},r=p=>{switch(p){case"add":return"Додавання води";case"edit":return"Редагувати кількість води";default:return"Додавання води"}},x=Number(o),m=Number(t.date),A=p=>{switch(p){case"add":return x;case"edit":return m}},h=p=>{switch(p){case"add":return 50;case"edit":return t.amount;default:return 50}},f=p=>{switch(p){case"add":return null;case"edit":return t.id;default:return null}};return e.jsxs("div",{className:pe.WaterModal,children:[e.jsx("h1",{children:r(s)}),e.jsx(is,{operationType:s,editTime:A(s),waterPortion:h(s),waterID:f(s),handleClose:l}),e.jsx("button",{type:"button",onClick:l,"aria-label":"closeWaterModal",className:pe.WaterModalCloseBtn,children:e.jsx("svg",{children:e.jsx("use",{xlinkHref:`${_}#icon-x`})})})]})},xs="_btnAdd_74sed_1",_s="_btnText_74sed_14",hs="_plus_74sed_15",le={btnAdd:xs,btnText:_s,plus:hs},ps=()=>{const s=Z(),{date:a}=X(),t=Q(a),o=i.useCallback(()=>{s()},[s]),l=i.useCallback(()=>{s(e.jsx(_e,{onClose:o,operationType:"add",timestampFromUrl:t}))},[s,o,t]);return e.jsxs("button",{type:"button",className:le.btnAdd,onClick:l,children:[e.jsx("svg",{className:le.plus,children:e.jsx("use",{xlinkHref:`${_}#icon-plus`})}),e.jsx("h2",{className:le.btnText,children:"Додати воду"})]})},gs="_modal_10779_1",js="_closeBtn_10779_16",bs="_svg_10779_35",Ns="_modalTextBox_10779_40",fs="_modalTitle_10779_50",vs="_modalText_10779_40",Ts="_modalBtnBox_10779_70",Bs="_userCountItem_10779_80",ws="_like_10779_94",Cs="_likeActive_10779_105",As="_loaderWrapper_10779_110",ys="_btnCancel_10779_156",W={modal:gs,closeBtn:js,svg:bs,modalTextBox:Ns,modalTitle:fs,modalText:vs,modalBtnBox:Ts,userCountItem:Bs,like:ws,likeActive:Cs,loaderWrapper:As,btnCancel:ys},ks=({onClose:s,currentAccess:a})=>{const t=R(),[o,l]=i.useState({}),[r,x]=i.useState([]),[m,A]=i.useState(a),h="admin2006@gmail.com";i.useEffect(()=>{async function d(){try{const u=await Se();x(u.data.users),A(!m)}catch(u){console.log(u.message)}}d()},[]);const f=()=>{const d=setTimeout(()=>{s(),clearTimeout(d)},xe.DURATION)},p=async(d,u)=>{try{l(B=>({...B,[d]:!0}));const v=await t(De({id:d,access:!u}));v.error?console.error("Помилка оновлення доступу:",v.error):x(B=>B.map(y=>y.id===d?{...y,access:!u}:y))}catch(v){console.error("Щось пішло не так:",v)}finally{l(v=>({...v,[d]:!1}))}};return e.jsxs("div",{className:W.modal,children:[e.jsx("button",{type:"button","aria-label":"closeDeleteEntryModal",onClick:f,className:W.closeBtn,children:e.jsx("svg",{className:W.svg,children:e.jsx("use",{xlinkHref:_+"#icon-x"})})}),e.jsxs("div",{className:W.modalTextBox,children:[e.jsx("h2",{className:W.modalTitle,children:"Список усіх користувачів"}),r.length>0?e.jsx("ul",{className:W.userCountList,children:r.filter(d=>d.email!==h).map(d=>e.jsxs("li",{className:W.userCountItem,children:[e.jsx("p",{children:d.email}),e.jsx("div",{className:W.loaderWrapper,children:o[d.id]?e.jsx(U,{height:30,width:30}):e.jsx("button",{children:e.jsx("svg",{onClick:()=>p(d.id,d.access),className:`${W.like} ${d.access?W.likeActive:""}`,children:e.jsx("use",{href:`${_}#icon-heart`})})})})]},d.id))}):e.jsx("p",{children:"Користувачі не знайдені."})]})]})},Ws="_btnAdd_a3w66_1",Ss="_btnText_a3w66_15",Ds="_plus_a3w66_16",ie={btnAdd:Ws,btnText:Ss,plus:Ds},Ms=()=>{const s=Z(),a=i.useCallback(()=>{s(e.jsx(ks,{onClose:()=>s(null)}))},[s]);return e.jsxs("button",{type:"button",className:ie.btnAdd,onClick:a,children:[e.jsx("svg",{className:ie.plus,children:e.jsx("use",{xlinkHref:`${_}#icon-admin`})}),e.jsx("h2",{className:ie.btnText,children:"Адмін"})]})},Ps=["січня","лютого","березня","квітня","травня","червня","липня","серпня","вересня","жовтня","листопада","грудня"],$s=s=>{const a=new Date;return{isToday:a.getFullYear()===s.getFullYear()&&a.getMonth()===s.getMonth()&&a.getDate()===s.getDate(),day:s.getDate(),month:Ps[s.getMonth()]}},Ls="_selectedDate_14sit_1",Is={selectedDate:Ls},we=({className:s})=>{const{date:a}=X(),{isToday:t,day:o,month:l}=$s(Q(a)),r=t?"Сьогодні":`${o} ${l}`;return e.jsx("p",{className:I(Is.selectedDate,s),children:r})},Rs="_progressBarContainer_v5cic_1",Fs="_progressBarTitle_v5cic_14",Hs="_progressBar_v5cic_1",Vs="_progressBarFill_v5cic_29",Es="_belowAim_v5cic_38",Us="_aboveAim_v5cic_44",qs="_belowAimRate_v5cic_50",Os="_aboveAimRate_v5cic_54",zs="_ball_v5cic_58",Gs="_percentNumber_v5cic_69",Js="_percentContainer_v5cic_79",Ys="_percent_v5cic_69",b={progressBarContainer:Rs,progressBarTitle:Fs,progressBar:Hs,progressBarFill:Vs,belowAim:Es,aboveAim:Us,belowAimRate:qs,aboveAimRate:Os,ball:zs,percentNumber:Gs,percentContainer:Js,percent:Ys},Xs=()=>{const s=T(ge),t=(r=>!r||r.length===0?0:r.reduce((x,m)=>{const A=m.percentage||0;return x+A},0))(s),o=t<100,l=Math.min(Math.max(t,0),100);return e.jsxs("div",{className:b.progressBarContainer,children:[e.jsx("h3",{className:b.progressBarTitle,children:e.jsx(we,{})}),e.jsx("div",{className:b.progressBar,children:e.jsxs("div",{className:I(b.progressBarFill,{[b.belowAim]:o,[b.aboveAim]:!o}),style:{width:`${l}%`},children:[e.jsx("p",{className:I(b.percentNumber,{[b.belowAimRate]:o,[b.aboveAimRate]:!o}),children:t>=100?"Норма":`${t.toFixed(0)}%`}),e.jsx("div",{className:I(b.ball,{[b.belowAim]:t<100,[b.aboveAim]:t>=100})})]})}),e.jsxs("div",{className:b.percentContainer,children:[e.jsx("p",{className:b.percent,children:"0%"}),e.jsx("p",{className:b.percent,children:"50%"}),e.jsx("p",{className:b.percent,children:"100%"})]})]})},Qs="_waterContainer_szgl7_1",Zs="_normaContainer_szgl7_16",Ks="_normaL_szgl7_28",et="_normaText_szgl7_35",st="_waterTitle_szgl7_53",G={waterContainer:Qs,normaContainer:Zs,normaL:Ks,normaText:et,waterTitle:st},tt=()=>{const s=T(Me),a=T(je),t="admin2006@gmail.com",o=s<1?`${s*1e3} мл`:`${s} л`;return e.jsxs("div",{className:G.waterContainer,children:[e.jsx(Ye,{className:G.waterTitle}),s===0?"":e.jsxs("div",{className:G.normaContainer,children:[e.jsx("h2",{className:G.normaL,children:o}),e.jsx("p",{className:G.normaText,children:"Моя щоденна норма"})]}),s===0?"":e.jsx(Xs,{}),s===0?"":e.jsx(ps,{}),a===t&&e.jsx(Ms,{})]})},at="_btnLogout_1xwlm_1",nt={btnLogout:at},ot=({handleClose:s})=>{const a=R(),t=Pe(),o=()=>{a($e()).then(({error:l})=>{l||(t("/"),s())})};return e.jsx("button",{type:"button",onClick:o,className:nt.btnLogout,children:"Вийти"})},rt="_modal_1spmq_1",ct="_closeBtn_1spmq_16",lt="_svg_1spmq_35",it="_modalTextBox_1spmq_40",dt="_modalTitle_1spmq_50",mt="_modalText_1spmq_40",ut="_modalBtnBox_1spmq_70",xt="_btnCancel_1spmq_80",P={modal:rt,closeBtn:ct,svg:lt,modalTextBox:it,modalTitle:dt,modalText:mt,modalBtnBox:ut,btnCancel:xt},_t=({onClose:s})=>{const a=T(be),t=()=>{const o=setTimeout(()=>{s(),clearTimeout(o)},xe.DURATION)};return e.jsxs("div",{className:P.modal,children:[e.jsx("button",{type:"button","aria-label":"closeLogOutModal",onClick:t,className:P.closeBtn,children:e.jsx("svg",{className:P.svg,children:e.jsx("use",{xlinkHref:`${_}#icon-x`})})}),e.jsxs("div",{className:P.modalTextBox,children:[e.jsx("h2",{className:P.modalTitle,children:"Вийти"}),e.jsx("p",{className:P.modalText,children:"Ви дійсно хочете вийти?"})]}),e.jsx("div",{className:P.modalBtnBox,children:a?e.jsx(U,{height:80,width:80}):e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:t,className:P.btnCancel,children:"Скасувати"}),e.jsx(ot,{handleClose:t})]})})]})},Ce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHoAAAB6CAMAAABHh7fWAAAAYFBMVEVVYIDn7O3///9MWHvt8vJTXn9PW3ykq7lJVXnq7+9DUHWepbTz9PZfaYd7gppFUnaPlqnb3eOEjaBpco61ucWDiqC+wczQ09rn6OxueJHHytN0fZassr/g5efV29+Vna2U7++XAAAFvElEQVRogcWb67aqOgxGi6UVuQgsEBVv7/+Wp4C6Fdrkq9Zx8mePvQYySZqmSZuKlbfkdd9m1bYphJGi2VZZ29e5/3uEJ7XdFXIQrZQYRSk9/qHYtZ58D/ShM9jkyXwX8wWJwXeH8Oi826pS26Cvoku1bVHdMXRdSZ77oOuqDobujinIvdPTYxcE3arUOrqUmJ+0X6N7kXiDR3ii+q/Q9ekz8AQ/0mNOofNMe43xXLTOKG8n0Pvmc5Ufijf7T9Brf++ywNPMG50fy+/Bg5RHl9Ed6L38apRfRUuH0e3oVgYw9kNUYp/jVnSWhAMPktxQdBVomP9JWWHoKuXfpfS0Sg8rtwYGJ7Wwl2iWrGSSFqcqW5/b9rzOqlORJqxvWPReoDmyTJusj+I3ifqsSaWv3nP0jRxnlYjsGsebaCabOL5mzEJTzoPLDN2Svm2C8mXJfdAvTMifz7F39J4ky+Ya27mTxNeGtPostryhc9Jb5C5yaPzUPNpRbCVzJ/pIGUzuGPAIJ9n66EJnlIvpE0A2bPLzy7UdvSenlbpi6Cvp5unehs4b6kfJmfSwfxKvKVdVTW5B02tGccHIUXShXiOSbImuyVAsM1Bpo/aN9HJdL9AnMhyk2EgPsqF9Rp/m6J5eojWstFGbTnCSfoa2149P8tYHvSXZSryj6dgt9M0HfWPU7t7QtNJCrn3QGb1+PtSe/um4RdoLveaW7u4FfWSSDI+5xWst1PEfuuZyorBokdZPdMXl+4HRunqgIzapC4wWOr+jWzbvDo0uuzuaDgE/0Xo7oQ98Ch8aLcRhRHd8nRMcPVjcoHd8PRscrXcDOi/YB39g8CI36Bp4MDxa1gbNLFo/QptSRCBDjSeFI/oM1Of6z6ALfm7pnQfZsAFtVLESdLEzPQbm4A/ZXPlq3xRBAvAyr/RoVJuPj8bPRM+jvRKFEQ04muxFyz+VeKO5PGVAtwL4wA/Q/ISVmWDThB+hdSW2/Nz6CVptBVlf/hJ9FMDi8RM0Av4VGpL/Ee0fUoB5jYmufNHAjDVjDYy2KrxWD7N+AKuhAQOTy9fikL3N5AJCilBJ75Mq9MghlQkpyLAMuxCozTcXzMdMIEUSKWNy2NMuDTaxzPIBLJpi2GpDle6B44sR3SKpwiDo7hWSl03oHkmQxifBdPiKgccECUgLBwEtHqNHZENaiCTDg6SQj1/At43JMFQCiCEtBdDxGQ3eYwmAFD6DyD3AFuhZ6Fj4gH6GZONQtXVXpAaL3OlpfrTBOS3uRS462MYzGLWRouMuU2mPbGhMwixgMfyi54bGAX1elVRI28DRZJADunl1F32itMbN/dy8wi0uSrfJ45tHKvjcsstx7/hzo+nDk9l7cnh7FkH72LvCN6UDo182pVcnMP6FQb9uxa/Q1CIMOu1fj13AsB8E/X7ssuqwmREEPTtsAtUOgZ4fsXEHi3chMjSozhpkcbCIRVMiS4rBlGN5nLqqAbRqiOUDTMssh8hIu1VK5UjQrqz16JxpGBi+V7b0eg0sIPaGASacqrLZc1lKm7DnetY2iaGR0f2bsuhcLUAv7CjTpOau5hCiaSAR7QaqueJoLdxwd0vMKrceYyupsgveJXFZFw441Qi0ulrGSuuK7nqC4VT7kyWWa7nd84O8gGdiqQTd9GVc7W1yqqTpvcF3uJzBF320iwa/1x6opGg/Ao/w6B2eLho6l22Nt8cUS8QZc2snfK2e44e0NT7aC6XOuM42Hv50OKyZc7S5kp5u7YYPDre0tgNtfK34zLus8D+ZWDu17e3KfRCVJ9nEZ492ZSPByEYcCGdXfCB7G61dBHdDfh6G7L6IQN2ACKC4U2UG/b3i5E0j5rbLV4pTKvPob1ydu1zFXy/60Or8rS7kUlXubfYNcp0MvMXml6Zg74Tv7qGqQwr7oUc6h4997iz6XZY0eHep6XtV0xc98fM8flhgs4nNfz95y3/5olpPgi07CgAAAABJRU5ErkJggg==",ht="_userAvatar_1fnxk_1",pt="_loader_1fnxk_20",gt="_uploadContainer_1fnxk_28",jt="_icon_1fnxk_36",bt="_ordinaryText_1fnxk_49",Nt="_hideBtn_1fnxk_72",ft="_userSettingForm_1fnxk_76",vt="_boldText_1fnxk_95",Tt="_genderContainer_1fnxk_101",Bt="_radioContainer_1fnxk_106",wt="_radioInput_1fnxk_116",Ct="_userPreferences_1fnxk_141",At="_formNameEmail_1fnxk_147",yt="_formWeightTime_1fnxk_152",kt="_formula_1fnxk_165",Wt="_inputBox_1fnxk_169",St="_formulaDescription_1fnxk_193",Dt="_formulaExpression_1fnxk_207",Mt="_temporarySymbol_1fnxk_221",Pt="_formulaDescriptionText_1fnxk_231",$t="_submitBtn_1fnxk_235",Lt="_loaderWrapper_1fnxk_259",It="_boldTextBtn_1fnxk_266",Rt="_consumeWater_1fnxk_273",Ft="_userNorma_1fnxk_280",Ht="_langButton_1fnxk_288",Vt="_errorMessage_1fnxk_298",n={userAvatar:ht,loader:pt,uploadContainer:gt,icon:jt,ordinaryText:bt,hideBtn:Nt,userSettingForm:ft,boldText:vt,genderContainer:Tt,radioContainer:Bt,radioInput:wt,userPreferences:Ct,formNameEmail:At,formWeightTime:yt,formula:kt,inputBox:Wt,formulaDescription:St,formulaExpression:Dt,temporarySymbol:Mt,formulaDescriptionText:Pt,submitBtn:$t,loaderWrapper:Lt,boldTextBtn:It,consumeWater:Rt,userNorma:Ft,langButton:Ht,errorMessage:Vt},Et=({handleClose:s})=>{const a=R(),t=T(Le),o=T(Ne),[l,r]=i.useState(0),x=T(be),m=T(Ie),A=fe({name:ve().min(2,"Назва має містити не менше 2 символів").max(60,"Максимальна кількість символів імені 60").required("Імя обовязково"),weight:se().min(0).max(300,"Вага значення менше 300").typeError("Має бути числом"),dailyActiveTime:se().min(0).max(12,"Час активного спорту").typeError("Має бути числом"),dailyWaterConsumption:se().min(0).max(8,"Добове споживання води максимум 8 л").typeError("Має бути числом")}),{control:h,register:f,handleSubmit:p,watch:d,formState:{errors:u}}=Te({resolver:Be(A),defaultValues:{email:t.email,gender:t.gender,name:t.name,weight:t.weight,dailyActiveTime:t.dailyActiveTime,dailyWaterConsumption:t.dailyWaterConsumption},mode:"onChange"}),v=d("weight"),B=d("gender"),y=d("dailyActiveTime");i.useEffect(()=>{let c;const w=parseInt(v||0),g=parseInt(y||0);B==="woman"?c=w*.03+g*.4:c=w*.04+g*.6,r(Math.min(parseFloat(c),8).toFixed(2))},[y,B,v]);const M=c=>{const{photo:w,...g}=t;/\s$/.test(c.name)&&(c.name=c.name.trim());const ae=Object.keys(g).sort().reduce((k,D)=>(k[D]=g[D],k),{}),ne=Object.keys(c).sort().reduce((k,D)=>(k[D]=c[D],k),{});if(JSON.stringify(ae)!==JSON.stringify(ne)){const{email:k,...D}=c;a(Re(D)).then(({error:oe})=>{oe||s()})}else s()},te=c=>{const w=new FormData,g=c.target.files[0];g&&(w.append("avatar",g),a(Fe(w)))},F=c=>w=>{let g=w.target.value;(g===""||/^(\d+(\.\d{0,3})?|\.\d{1,3})$/.test(g))&&c.onChange(g)},q=c=>()=>{c.value===0&&c.onChange("")},O=c=>()=>{c.value===""?c.onChange(0):c.value.startsWith(".")&&c.onChange("0"+c.value)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:n.userAvatar,children:[m?e.jsx("div",{className:n.loader,children:e.jsx(U,{})}):e.jsx("img",{src:o||`${Ce}`,alt:"User photo"}),e.jsxs("label",{children:[e.jsxs("div",{className:n.uploadContainer,children:[e.jsx("svg",{className:n.icon,children:e.jsx("use",{xlinkHref:`${_}#icon-upload`})}),e.jsx("span",{className:n.ordinaryText,children:"Завантажити фото"})]}),e.jsx("input",{className:n.hideBtn,type:"file",accept:"image/*",onChange:te}),u.avatar&&e.jsx("p",{children:u.avatar.message})]})]}),e.jsxs("form",{onSubmit:p(M),className:n.userSettingForm,children:[e.jsx("div",{className:n.genderContainer,children:e.jsxs("label",{className:n.genderIdentity,children:[e.jsx("span",{className:n.boldText,children:"Ваша стать"}),e.jsxs("div",{className:n.radioContainer,children:[e.jsx("input",{type:"radio",id:"woman",className:n.radioInput,...f("gender"),value:"woman",checked:B==="woman"}),e.jsx("label",{htmlFor:"woman",className:n.ordinaryText,children:"Жіноче"}),e.jsx("input",{type:"radio",id:"man",className:n.radioInput,...f("gender"),value:"man",checked:B==="man"}),e.jsx("label",{htmlFor:"man",className:n.ordinaryText,children:"Чоловіче"})]}),u.gender&&e.jsx("p",{className:n.errorMessage,children:u.gender.message})]})}),e.jsxs("div",{className:n.userPreferences,children:[e.jsxs("div",{className:n.formNameEmail,children:[e.jsxs("label",{children:[e.jsx("span",{className:n.boldText,children:"Ваше ім'я"}),e.jsx(E,{render:({field:c})=>e.jsx("input",{...c,className:n.inputBox,placeholder:"Користувач",onChange:w=>{let g=w.target.value;/^\s|\s{2}$/.test(g)||c.onChange(g)}}),name:"name",control:h}),u.name&&e.jsx("p",{className:n.errorMessage,children:u.name.message})]}),e.jsxs("label",{children:[e.jsx("span",{className:n.boldText,children:"Пошта"}),e.jsx("input",{disabled:!0,...f("email"),className:n.inputBox,placeholder:"placeholderEmail"})]}),e.jsxs("div",{className:n.formula,children:[e.jsx("p",{className:n.boldText,children:"Моя щоденна норма"}),e.jsxs("div",{className:n.formulaDescription,children:[e.jsxs("p",{className:n.ordinaryText,children:[e.jsx("span",{children:"Для жінок: "}),e.jsx("span",{className:n.formulaExpression,children:"V=(M*0,03) + (T*0,4)"})]}),e.jsxs("p",{className:n.ordinaryText,children:[e.jsx("span",{children:"Для чоловіків: "}),e.jsx("span",{className:n.formulaExpression,children:"V=(M*0,04) + (T*0,6)"})]})]}),e.jsxs("p",{className:n.ordinaryText,children:[e.jsx("span",{className:n.formulaExpression,children:"* "}),e.jsx("span",{className:n.formulaDescriptionText,children:"* V - об'єм водної норми в літрах на день, М - ваша вага, Т - час активних занять спортом або іншої активної діяльності (у разі відсутності встановіть 0)"})]}),e.jsxs("p",{className:n.ordinaryText,children:[e.jsx("span",{className:n.temporarySymbol,children:"! "}),"Активний час (години)"]})]})]}),e.jsxs("div",{className:n.formWeightTime,children:[e.jsxs("label",{children:[e.jsx("span",{className:n.ordinaryText,children:"Ваша вага (кг):"}),e.jsx(E,{name:"weight",control:h,render:({field:c})=>e.jsx("input",{...c,className:n.inputBox,onChange:F(c),onFocus:q(c),onBlur:O(c)})}),u.weight&&e.jsx("p",{className:n.errorMessage,children:u.weight.message})]}),e.jsxs("label",{children:[e.jsx("span",{className:n.ordinaryText,children:"Час активних занять спортом:"}),e.jsx(E,{name:"dailyActiveTime",control:h,render:({field:c})=>e.jsx("input",{...c,className:n.inputBox,onChange:F(c),onFocus:q(c),onBlur:O(c)})}),u.dailyActiveTime&&e.jsx("p",{className:n.errorMessage,children:u.dailyActiveTime.message})]}),e.jsxs("div",{className:n.consumeWater,children:[e.jsxs("p",{className:n.ordinaryText,children:["Потрібна кількість води в літрах на день:  ",e.jsxs("span",{className:n.userNorma,children:[isNaN(l)?0:l," L"]})]}),e.jsxs("label",{children:[e.jsx("span",{className:n.boldText,children:"Запишіть, скільки води ви вип'єте:"}),e.jsx(E,{name:"dailyWaterConsumption",control:h,render:({field:c})=>e.jsx("input",{...c,className:n.inputBox,onChange:F(c),onFocus:q(c),onBlur:O(c)})}),u.dailyWaterConsumption&&e.jsx("p",{className:n.errorMessage,children:u.dailyWaterConsumption.message})]})]})]})]}),e.jsxs("button",{disabled:x,type:"submit",className:`${n.submitBtn} ${n.boldTextBtn}`,children:["Зберегти",x&&e.jsx("div",{className:n.loaderWrapper,children:e.jsx(U,{height:56,width:56})})]})]})]})},Ut="_modalSettingContainer_1md4x_1",qt="_modalHeader_1md4x_14",Ot="_closeBtn_1md4x_29",zt="_icon_1md4x_44",ee={modalSettingContainer:Ut,modalHeader:qt,closeBtn:Ot,icon:zt},Gt=({onClose:s})=>e.jsxs("div",{className:ee.modalSettingContainer,children:[e.jsxs("div",{className:ee.modalHeader,children:[e.jsx("h2",{children:"Налаштування"}),e.jsx("button",{type:"button","aria-label":"closeSettingModal",className:ee.closeBtn,onClick:s,children:e.jsx("svg",{className:ee.icon,children:e.jsx("use",{xlinkHref:_+"#icon-x"})})})]}),e.jsx(Et,{handleClose:s})]}),Jt="_userBarPopup_1ap7q_1",Yt="_userBarPopupList_1ap7q_16",Xt="_userBarPopupListItem_1ap7q_23",Qt="_userBarPopupIcon_1ap7q_40",H={userBarPopup:Jt,userBarPopupList:Yt,userBarPopupListItem:Xt,userBarPopupIcon:Qt},Zt=()=>{const s=Z(),a=i.useCallback(()=>{s()},[s]),t=i.useCallback(()=>{s(e.jsx(Gt,{onClose:a}))},[s,a]),o=i.useCallback(()=>{s(e.jsx(_t,{onClose:a}))},[s,a]);return e.jsx("div",{className:H.userBarPopup,children:e.jsxs("ul",{className:H.userBarPopupList,children:[e.jsxs("li",{className:H.userBarPopupListItem,onClick:t,children:[e.jsx("svg",{className:H.userBarPopupIcon,children:e.jsx("use",{xlinkHref:`${_}#icon-settings`})}),"Профіль"]}),e.jsxs("li",{className:H.userBarPopupListItem,onClick:o,children:[e.jsx("svg",{className:H.userBarPopupIcon,children:e.jsx("use",{xlinkHref:`${_}#icon-log-out`})}),"Вийти"]})]})})},Kt="_userBarWrapper_1k17p_1",ea="_userBar_1k17p_1",sa="_userBarText_1k17p_24",ta="_userBarAvatar_1k17p_32",aa="_userBarIcon_1k17p_44",na="_rotate_1k17p_56",V={userBarWrapper:Kt,userBar:ea,userBarText:sa,userBarAvatar:ta,userBarIcon:aa,rotate:na},oa=({name:s})=>{const[a,t]=i.useState(!1),o=T(Ne),l=i.useRef(null),r=m=>{l.current&&!l.current.contains(m.target)&&m.target.name!=="openPopover"&&t(!1)};i.useEffect(()=>(a?document.addEventListener("mousedown",r):document.removeEventListener("mousedown",r),()=>{document.removeEventListener("mousedown",r)}),[a]);const x=()=>{t(m=>!m)};return e.jsxs("div",{className:V.userBarWrapper,children:[e.jsxs("button",{className:V.userBar,type:"button",name:"openPopover",onClick:x,"aria-label":"openCloseUserPanel",children:[e.jsx("div",{className:V.userBarText,children:s}),e.jsx("div",{className:V.userBarAvatar,style:{backgroundImage:`url(${o||Ce})`}}),e.jsx("svg",{className:`${V.userBarIcon} ${a?V.rotate:""}`,children:e.jsx("use",{xlinkHref:`${_}#icon-chevron-down`})})]}),a&&e.jsx("div",{ref:l,children:e.jsx(Zt,{})})]})},ra="_userPanel_iff7o_1",ca="_userPanelTitle_iff7o_7",la="_userPanelTitleName_iff7o_18",de={userPanel:ra,userPanelTitle:ca,userPanelTitleName:la},ia=()=>{const s=T(He),a=T(je),t=a?a.split("@")[0]:null,o=s==="User"?t:s;return e.jsxs("div",{className:de.userPanel,children:[e.jsxs("h1",{className:de.userPanelTitle,children:["Привіт,",e.jsx("span",{className:de.userPanelTitleName,children:o})]}),e.jsx(oa,{name:s})]})},da="_btnStyle_445u2_1",ma="_iconStyle_445u2_15",ua="_btnStyleText_445u2_31",me={btnStyle:da,iconStyle:ma,btnStyleText:ua},xa=()=>{const s=Z(),a=i.useCallback(()=>{s()},[s]),{date:t}=X(),o=Q(t).getTime(),l=i.useCallback(()=>{s(e.jsx(_e,{onClose:a,operationType:"add",timestampFromUrl:o}))},[s,a,o]);return e.jsxs("button",{className:me.btnStyle,type:"button",onClick:l,children:[e.jsx("svg",{className:me.iconStyle,children:e.jsx("use",{xlinkHref:_+"#icon-plus"})}),e.jsx("span",{className:me.btnStyleText,children:"Додати воду"})]})},_a=s=>{const a=new Date(Number(s));let t=a.getHours();const o=a.getMinutes(),l=t>=12?"PM":"AM";t>=12&&(t=t%12,t=t||12);const r=t.toString().padStart(2,"0"),x=o.toString().padStart(2,"0");return`${r}:${x} ${l}`},ha=s=>s>=1e3?{value:s/1e3,text:"л"}:{value:s,text:"мл"},pa="_btnDelete_19mt5_1",ga={btnDelete:pa},ja=({isLoading:s,handleDelete:a})=>e.jsx("button",{type:"button",className:ga.btnDelete,onClick:()=>a(),disabled:s,children:"Видалити"}),ba="_modal_z4bq9_1",Na="_closeBtn_z4bq9_16",fa="_svg_z4bq9_35",va="_modalTextBox_z4bq9_40",Ta="_modalTitle_z4bq9_50",Ba="_modalText_z4bq9_40",wa="_modalBtnBox_z4bq9_70",Ca="_btnCancel_z4bq9_80",$={modal:ba,closeBtn:Na,svg:fa,modalTextBox:va,modalTitle:Ta,modalText:Ba,modalBtnBox:wa,btnCancel:Ca},Aa=({id:s,onClose:a})=>{const t=R(),[o,l]=i.useState(!1),r=()=>{const m=setTimeout(()=>{a(),clearTimeout(m)},xe.DURATION)},x=()=>{l(()=>!0),t(Ve(s)).then(({error:m})=>{m?console.error("Помилка видалення запису:",m):r(),l(!1)})};return e.jsxs("div",{className:$.modal,children:[e.jsx("button",{type:"button","aria-label":"closeDeleteEntryModal",onClick:r,className:$.closeBtn,children:e.jsx("svg",{className:$.svg,children:e.jsx("use",{xlinkHref:_+"#icon-x"})})}),e.jsxs("div",{className:$.modalTextBox,children:[e.jsx("h2",{className:$.modalTitle,children:"Видалити запис"}),e.jsx("p",{className:$.modalText,children:"Ви дійсно хочете видалити запис ?"})]}),e.jsx("div",{className:$.modalBtnBox,children:o?e.jsx(U,{height:80,width:80}):e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:r,className:$.btnCancel,children:"Відміна"}),e.jsx(ja,{handleDelete:x,id:s})]})})]})},ya="_waterItemContent_1msly_1",ka="_waterInfo_1msly_12",Wa="_waterAmount_1msly_15",Sa="_waterDate_1msly_22",Da="_iconWaterGlass_1msly_28",Ma="_editButton_1msly_40",Pa="_deleteButton_1msly_41",$a="_containerButtons_1msly_53",La="_iconAction_1msly_59",S={waterItemContent:ya,waterInfo:ka,waterAmount:Wa,waterDate:Sa,iconWaterGlass:Da,editButton:Ma,deleteButton:Pa,containerButtons:$a,iconAction:La},Ia=({water:s})=>{const a=Z(),t=i.useCallback(()=>{a()},[a]),o=i.useCallback(()=>{a(e.jsx(Aa,{id:s.id,onClose:t}))},[a,t,s]),l=i.useCallback(()=>{a(e.jsx(_e,{water:s,onClose:t,operationType:"edit"}))},[a,t,s]),r=ha(s.amount);return e.jsxs("div",{className:S.waterItemContent,children:[e.jsx("svg",{className:S.iconWaterGlass,width:"44",height:"45",children:e.jsx("use",{xlinkHref:_+"#icon-glass"})}),e.jsxs("div",{className:S.waterInfo,children:[e.jsx("p",{className:S.waterAmount,children:`${r.value} ${r.text}`}),e.jsx("p",{className:S.waterDate,children:_a(s.date)})]}),e.jsxs("div",{className:S.containerButtons,children:[e.jsx("button",{className:S.editButton,onClick:l,"aria-label":"Edit the entered amount of water",children:e.jsx("svg",{className:S.iconAction,width:"14",height:"14",children:e.jsx("use",{xlinkHref:_+"#icon-edit"})})}),e.jsx("button",{className:S.deleteButton,onClick:o,"aria-label":"Delete the entered amount of water",children:e.jsx("svg",{className:S.iconAction,width:"14",height:"14",children:e.jsx("use",{xlinkHref:_+"#icon-trash"})})})]})]})},Ra="_waterList_nhslc_1",Fa="_messageContainer_nhslc_12",Ha="_noWater_nhslc_21",Va="_skeleton_nhslc_68",Ea="_shimmer_nhslc_1",J={waterList:Ra,messageContainer:Fa,noWater:Ha,skeleton:Va,shimmer:Ea},Ua=()=>{const s=T(ge);return T(Ee)?e.jsx("div",{className:J.waterList,children:[1,2,3].map(t=>e.jsx("div",{className:J.skeleton},t))}):s.length?e.jsx("ul",{className:J.waterList,children:s.map(t=>e.jsx("li",{children:e.jsx(Ia,{water:t})},t.id))}):e.jsx("div",{className:J.messageContainer,children:e.jsx("h2",{className:J.noWater,children:"Вода ще не додана"})})},qa="_info_iy33z_1",Oa="_dailyFont_iy33z_7",za="_header_iy33z_20",Ga="_title_iy33z_28",Ja="_button_iy33z_43",Ya="_icon_iy33z_67",Xa="_iconBackground_iy33z_90",ue={info:qa,dailyFont:Oa,header:za,title:Ga,button:Ja,icon:Ya,iconBackground:Xa},Qa=()=>e.jsxs("div",{className:ue.info,children:[e.jsxs("div",{className:ue.header,children:[e.jsx(we,{className:ue.dailyFont}),e.jsx(xa,{})]}),e.jsx(Ua,{})]}),Za=({title:s,styles:a})=>e.jsx("span",{className:a,children:s}),Ka=["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень"," Жовтень"," Листопад","Грудень"],en="_btn_11ww4_1",sn="_btnDisabled_11ww4_13",tn="_svgSchedule_11ww4_17",an="_svgPie_11ww4_18",nn="_calendarTitle_11ww4_28",on="_month_11ww4_39",rn="_monthInd_11ww4_46",cn="_monthYear_11ww4_69",ln="_statisticBtn_11ww4_76",dn="_svgArrowLeft_11ww4_86",mn="_svgArrowRight_11ww4_87",un="_isHidden_11ww4_98",N={btn:en,btnDisabled:sn,svgSchedule:tn,svgPie:an,calendarTitle:nn,month:on,monthInd:rn,monthYear:cn,statisticBtn:ln,svgArrowLeft:dn,svgArrowRight:mn,isHidden:un},xn=()=>{const s=R(),{date:a}=X(),t=Q(a),[o,l]=i.useState(new Date(t).getFullYear()),[r,x]=i.useState(new Date(t).getMonth()),m=T(Ue),h=qe().pathname.split("/").pop(),f=()=>{if(r===11){s(Y(new Date(o+1,0,4).getTime())),x(0),l(o+1);return}s(Y(new Date(o,r+1,4).getTime())),x(r+1)},p=()=>{if(r===0){s(Y(new Date(o-1,11,4).getTime())),x(11),l(o-1);return}s(Y(new Date(o,r-1,4).getTime())),x(r-1)},d=Ka[r],u=h==="schedule"?"Статистика":"Місяць",v=new Date(Date.now()).getFullYear(),B=new Date(Date.now()).getMonth(),y=new Date(v,B)<=new Date(o,r);return e.jsxs("div",{className:N.calendarTitle,children:[e.jsx(Za,{title:u,styles:N.month}),e.jsxs("div",{className:N.monthInd,children:[e.jsx("button",{onClick:p,className:N.btn,disabled:m,children:e.jsx("svg",{className:N.svgArrowLeft,children:e.jsx("use",{xlinkHref:`${_}#icon-arrow`})})}),e.jsx("span",{className:N.monthYear,children:`${d}, ${o}`}),e.jsx("button",{onClick:f,className:`${N.btn} ${y?N.btnDisabled:""} `,disabled:m||y,children:e.jsx("svg",{className:N.svgArrowRight,children:e.jsx("use",{xlinkHref:`${_}#icon-arrow`})})}),e.jsx(he,{to:"calendar",className:({isActive:M})=>I(N.statisticBtn,{[N.isHidden]:M}),children:e.jsx("svg",{className:N.svgSchedule,children:e.jsx("use",{xlinkHref:`${_}#icon-pie-chart`})})}),e.jsx(he,{to:"schedule",className:({isActive:M})=>I(N.statisticBtn,{[N.isHidden]:M}),children:e.jsx("svg",{className:N.svgPie,children:e.jsx("use",{xlinkHref:`${_}#icon-pie-chart`})})})]})]})},_n=()=>e.jsxs("div",{children:[e.jsx(xn,{}),e.jsx(i.Suspense,{fallback:e.jsx(Qe,{}),children:e.jsx(Oe,{})})]}),hn="_waterDetailedInfo_199e5_1",pn={waterDetailedInfo:hn},gn=()=>e.jsxs("section",{className:pn.waterDetailedInfo,children:[e.jsx(ia,{}),e.jsx(Qa,{}),e.jsx(_n,{})]}),jn="_waterPage_16oaj_1",bn="_registerPageRight_16oaj_8",Nn={waterPage:jn,registerPageRight:bn},wn=()=>{const{date:s}=X(),a=R(),t=Q(s).getTime(),[o,l]=i.useState(!0);return i.useEffect(()=>{if(o){const r=Date.now();a(ze()),a(Ge(t)),a(Y(t)),a(Je(r)),l(!1)}},[o,t,a]),e.jsxs("div",{className:Nn.waterPage,children:[e.jsx(tt,{}),e.jsx(gn,{})]})};export{wn as default};
